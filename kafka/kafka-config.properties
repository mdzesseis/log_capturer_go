# =============================================================================
# KAFKA BROKER CONFIGURATION
# =============================================================================
# Configuração customizada do broker Kafka
# Este arquivo pode ser montado no container para sobrescrever configurações
# =============================================================================

# -----------------------------------------------------------------------------
# BROKER SETTINGS
# -----------------------------------------------------------------------------
broker.id=1
num.network.threads=8
num.io.threads=16
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# -----------------------------------------------------------------------------
# LOG SETTINGS
# -----------------------------------------------------------------------------
# Diretório de logs
log.dirs=/var/lib/kafka/data

# Número padrão de partições por tópico
num.partitions=3

# Fator de replicação padrão
default.replication.factor=1

# Número mínimo de réplicas in-sync
min.insync.replicas=1

# Retenção de logs (7 dias = 168 horas = 604800000 ms)
log.retention.hours=168
log.retention.bytes=1073741824

# Tamanho do segmento de log (1GB)
log.segment.bytes=1073741824

# Tempo antes de checar se algum log segment pode ser deletado
log.retention.check.interval.ms=300000

# Compressão padrão
compression.type=snappy

# -----------------------------------------------------------------------------
# ZOOKEEPER SETTINGS
# -----------------------------------------------------------------------------
zookeeper.connect=zookeeper:2181
zookeeper.connection.timeout.ms=18000

# -----------------------------------------------------------------------------
# PERFORMANCE SETTINGS
# -----------------------------------------------------------------------------
# Tamanho máximo de mensagem (1MB)
message.max.bytes=1048576
replica.fetch.max.bytes=1048576

# Threads de réplica
num.replica.fetchers=4

# Background threads
background.threads=10

# -----------------------------------------------------------------------------
# AUTO-CREATE TOPICS
# -----------------------------------------------------------------------------
# Permitir criação automática de tópicos
auto.create.topics.enable=true

# Tempo de rebalanceamento para consumer groups
group.initial.rebalance.delay.ms=3000

# -----------------------------------------------------------------------------
# OFFSETS TOPIC CONFIGURATION
# -----------------------------------------------------------------------------
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1

# -----------------------------------------------------------------------------
# CLEANUP SETTINGS
# -----------------------------------------------------------------------------
# Política de cleanup
log.cleanup.policy=delete

# Intervalo entre cleanup tasks
log.cleaner.enable=true
log.cleaner.backoff.ms=15000

# -----------------------------------------------------------------------------
# COMPRESSION SETTINGS
# -----------------------------------------------------------------------------
# Habilitar compressão de produtores
compression.type=snappy

# -----------------------------------------------------------------------------
# METRICS AND MONITORING
# -----------------------------------------------------------------------------
# Desabilitar métricas do Confluent Support
confluent.support.metrics.enable=false

# Intervalo de coleta de métricas
metric.reporters=

# -----------------------------------------------------------------------------
# SECURITY SETTINGS (Disabled by default)
# -----------------------------------------------------------------------------
# Uncomment to enable security
# ssl.keystore.location=/etc/kafka/secrets/kafka.keystore.jks
# ssl.keystore.password=changeme
# ssl.key.password=changeme
# ssl.truststore.location=/etc/kafka/secrets/kafka.truststore.jks
# ssl.truststore.password=changeme
# security.inter.broker.protocol=SSL

# SASL settings (if using SASL authentication)
# sasl.enabled.mechanisms=PLAIN,SCRAM-SHA-256
# sasl.mechanism.inter.broker.protocol=PLAIN

# -----------------------------------------------------------------------------
# QUOTAS (Resource limits per client)
# -----------------------------------------------------------------------------
# producer.quota.window.num=11
# producer.quota.window.size.seconds=1
# quota.producer.default=10485760

# consumer.quota.window.num=11
# consumer.quota.window.size.seconds=1
# quota.consumer.default=10485760
