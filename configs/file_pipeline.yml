# =============================================================================
# SSW LOGS CAPTURE - FILE PIPELINE CONFIGURATION
# =============================================================================
# Este arquivo define arquivos e diretórios específicos para monitoramento
# Sobrescreve as configurações default de files_config em config.yaml
# =============================================================================

version: "1.0"

# -----------------------------------------------------------------------------
# ARQUIVOS ESPECÍFICOS PARA MONITORAMENTO
# -----------------------------------------------------------------------------
# Arquivos com caminho completo têm precedência sobre descoberta automática
# Se o arquivo não existir, gera WARNING no log mas não trava o serviço
files:
  # System logs - APENAS OS QUE EXISTEM
  - path: "/var/log/syslog"
    labels:
      source: "file"
      file_path: "/var/log/syslog"
      file_name: "syslog"
    enabled: true

  - path: "/var/log/auth.log"
    labels:
      source: "file"
      file_path: "/var/log/auth.log"
      file_name: "auth.log"
    enabled: true

  # REMOVIDOS - arquivos que não existem no sistema

# -----------------------------------------------------------------------------
# DIRETÓRIOS PARA DESCOBERTA AUTOMÁTICA
# -----------------------------------------------------------------------------
# Monitora diretórios inteiros com padrões de inclusão/exclusão
# Arquivos descobertos recebem labels default configuradas aqui
directories:
  # DESABILITADO - descoberta automática pode capturar arquivos indesejados
  - path: "/var/log"
    patterns: []
    exclude_patterns: []
    exclude_directories: []
    recursive: false
    default_labels: {}
    enabled: false

  # DESABILITADO - Logs da aplicação log_capturer (evita feedback loop)
  - path: "/app/logs"
    patterns: []
    exclude_patterns: []
    recursive: false
    default_labels: {}
    enabled: false

  # Logs customizados (adicione seus próprios diretórios aqui)
  # - path: "/opt/myapp/logs"
  #   patterns:
  #     - "*.log"
  #   exclude_patterns:
  #     - "*.gz"
  #   exclude_directories:
  #     - "archive"
  #   recursive: true
  #   default_labels:
  #     log_type: "application"
  #     service: "myapp"
  #     team: "myteam"
  #   enabled: true

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE MONITORAMENTO
# -----------------------------------------------------------------------------
# Configurações específicas para o comportamento do file monitor
monitoring:
  # Intervalo de varredura de diretórios (segundos)
  directory_scan_interval: 30

  # Máximo de arquivos simultâneos monitorados
  max_files: 1000

  # Tamanho do buffer de leitura (bytes)
  read_buffer_size: 65536  # 64KB

  # Intervalo de polling para mudanças (milissegundos)
  poll_interval: 1000

  # Seguir links simbólicos
  follow_symlinks: false

  # Incluir arquivos ocultos (começando com .)
  include_hidden: false

  # Tamanho máximo de arquivo para monitorar (0 = ilimitado)
  max_file_size: 104857600  # 100MB

  # Ação quando arquivo é rotacionado (recreate, follow, ignore)
  rotation_action: "recreate"
